<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Missão Viagem</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>

    <!-- Salesforce Embedded Messaging -->
    <script type="text/javascript">
      function initEmbeddedMessaging() {
        try {
          const usuario = JSON.parse(localStorage.getItem('usuario') || '{}');
          const email = usuario?.email || '';

          embeddedservice_bootstrap.settings.language = 'en_US';
      
      
          embeddedservice_bootstrap.init(
            '00DHs00000HIRTk',
            'SDO_Messaging_for_Web',
            'https://storm-04dd1cb768ee3e.my.site.com/ESWSDOMessagingforWeb1734615879047',
            {
              scrt2URL: 'https://storm-04dd1cb768ee3e.my.salesforce-scrt.com'
            }
          );
        } catch (err) {
          console.error('Error loading Embedded Messaging: ', err);
        }
      }
    </script>
    <script>
      window.addEventListener("onEmbeddedMessagingReady", () => {
        console.log("Received the onEmbeddedMessagingReady event…");

        const usuario = JSON.parse(localStorage.getItem('usuario') || '{}');
        const email = usuario?.email || '';
    
        // Send data to Salesforce
        embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({"Order_Number" : "867-5309",
            "Customer_ID" : "11098324"});
    
        // Remove any items from the previous list that you don't want to send
        embeddedservice_bootstrap.prechatAPI.removeHiddenPrechatFields(["Customer_ID"]);
      });
    </script>
    <script
      type="text/javascript"
      src="https://storm-04dd1cb768ee3e.my.site.com/ESWSDOMessagingforWeb1734615879047/assets/js/bootstrap.min.js"
      onload="initEmbeddedMessaging()"
    ></script>
  </body>
</html>
